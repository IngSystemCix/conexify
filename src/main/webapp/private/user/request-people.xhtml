<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:faces="jakarta.faces"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:f="jakarta.faces.core"
      xmlns:h="jakarta.faces.html"
      xmlns:pt="jakarta.faces.passthrough"
      xmlns:cc="jakarta.faces.composite"
      xmlns:c="jakarta.tags.core"
      xmlns:fn="jakarta.tags.functions"
      xmlns:p="http://primefaces.org/ui">
<f:view contentType="text/html" locale="#{region.locale}">
  <h:head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <h:outputStylesheet library="css" name="style.css"/>
    <h:outputStylesheet library="webjars" name="primeflex/3.3.1/primeflex.min.css"/>
    <h:outputStylesheet library="css" name="font.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"/>
    <link rel="shortcut icon" href="#{resource['img/favicon.png']}" type="image/png"/>
    <title>conexify :: <h:outputText value="#{msg['title_page_request_friend']}"/></title>
  </h:head>
  <h:body styleClass="w-full h-screen">
    <ui:include src="/fragments/menubar.xhtml" />
    <div class="text-lg font-bold mb-2 p-2 text-primary" style="margin-top: 4rem">
      #{msg['label_amount_request_people']}: #{requestsPeople.requests.size()}
    </div>
    <h:panelGroup id="requestPeoplePanel">
      <!-- AquÃ­ van los contenidos que deseas actualizar -->
      <ul class="list-none p-2" style="width: 300px;">
        <ui:repeat value="#{requestsPeople.requests}" var="requestPeople">
          <li class="border-b pb-2 mb-2">
            <div class="font-bold text-lg">
              #{requestPeople.fullName}
            </div>

            <div class="text-sm text-gray-600 mt-1">
              #{msg['label_mutual_friends']}: #{requestPeople.mutualFriends.size()}
            </div>

            <div class="mt-2 flex gap-2">
              <p:commandButton
                value="#{msg['button_accept']}"
                icon="pi pi-check"
                action="#{requestsPeople.acceptRequest(requestPeople)}"
                update=":requestPeoplePanel" />

              <p:commandButton
                value="#{msg['button_reject']}"
                icon="pi pi-times"
                styleClass="ui-button-danger"
                action="#{requestsPeople.rejectRequest(requestPeople)}"
                update=":requestPeoplePanel" />
            </div>
          </li>
        </ui:repeat>
      </ul>
    </h:panelGroup>
  </h:body>
</f:view>
</html>
